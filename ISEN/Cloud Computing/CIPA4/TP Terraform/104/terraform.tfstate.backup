{"version":4,"terraform_version":"1.11.3","serial":8,"lineage":"1e00b2ad-aaa2-a943-0d6a-6829699d32aa","outputs":{"demo-flask-url":{"value":"http://demo-flask:8080","type":"string"},"nginx-url":{"value":"https://135.125.246.84.xip.opensteak.fr/","type":"string"}},"resources":[{"mode":"managed","type":"kubernetes_config_map","name":"nginx-config","provider":"provider[\"registry.opentofu.org/hashicorp/kubernetes\"]","instances":[{"schema_version":0,"attributes":{"binary_data":null,"data":{"nginx.conf":"events {}\n\nhttp {\n  server {\n    listen 80;\n    location / {\n      proxy_pass http://demo-flask:8080;\n    }\n  }\n}\n"},"id":"default/nginx-config","immutable":false,"metadata":[{"annotations":null,"generate_name":"","generation":0,"labels":null,"name":"nginx-config","namespace":"default","resource_version":"33566","uid":"cc909844-0489-4cfc-8bf7-b295205a956d"}]},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"kubernetes_deployment","name":"demo-flask","provider":"provider[\"registry.opentofu.org/hashicorp/kubernetes\"]","instances":[{"schema_version":1,"attributes":{"id":"default/demo-flask","metadata":[{"annotations":null,"generate_name":"","generation":1,"labels":null,"name":"demo-flask","namespace":"default","resource_version":"33660","uid":"55c27233-1ab7-4ca0-a7ea-221bd7239152"}],"spec":[{"min_ready_seconds":0,"paused":false,"progress_deadline_seconds":600,"replicas":"1","revision_history_limit":10,"selector":[{"match_expressions":[],"match_labels":{"app":"demo-flask"}}],"strategy":[{"rolling_update":[{"max_surge":"25%","max_unavailable":"25%"}],"type":"RollingUpdate"}],"template":[{"metadata":[{"annotations":null,"generate_name":"","generation":0,"labels":{"app":"demo-flask"},"name":"","namespace":"","resource_version":"","uid":""}],"spec":[{"active_deadline_seconds":0,"affinity":[],"automount_service_account_token":true,"container":[{"args":null,"command":null,"env":[],"env_from":[],"image":"arnaudmorin/demo-flask:latest","image_pull_policy":"Always","lifecycle":[],"liveness_probe":[],"name":"demo-flask","port":[{"container_port":8080,"host_ip":"","host_port":0,"name":"","protocol":"TCP"}],"readiness_probe":[],"resources":[{"limits":{},"requests":{}}],"security_context":[],"startup_probe":[],"stdin":false,"stdin_once":false,"termination_message_path":"/dev/termination-log","termination_message_policy":"File","tty":false,"volume_device":[],"volume_mount":[],"working_dir":""}],"dns_config":[],"dns_policy":"ClusterFirst","enable_service_links":true,"host_aliases":[],"host_ipc":false,"host_network":false,"host_pid":false,"hostname":"","image_pull_secrets":[],"init_container":[],"node_name":"","node_selector":null,"os":[],"priority_class_name":"","readiness_gate":[],"restart_policy":"Always","runtime_class_name":"","scheduler_name":"default-scheduler","security_context":[],"service_account_name":"","share_process_namespace":false,"subdomain":"","termination_grace_period_seconds":30,"toleration":[],"topology_spread_constraint":[],"volume":[]}]}]}],"timeouts":null,"wait_for_rollout":true},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9"}]},{"mode":"managed","type":"kubernetes_deployment","name":"nginx-frontend","provider":"provider[\"registry.opentofu.org/hashicorp/kubernetes\"]","instances":[{"schema_version":1,"attributes":{"id":"default/nginx-frontend","metadata":[{"annotations":null,"generate_name":"","generation":1,"labels":null,"name":"nginx-frontend","namespace":"default","resource_version":"33653","uid":"f33dc3ac-8dcf-4675-a422-e871db96d960"}],"spec":[{"min_ready_seconds":0,"paused":false,"progress_deadline_seconds":600,"replicas":"1","revision_history_limit":10,"selector":[{"match_expressions":[],"match_labels":{"app":"nginx-frontend"}}],"strategy":[{"rolling_update":[{"max_surge":"25%","max_unavailable":"25%"}],"type":"RollingUpdate"}],"template":[{"metadata":[{"annotations":null,"generate_name":"","generation":0,"labels":{"app":"nginx-frontend"},"name":"","namespace":"","resource_version":"","uid":""}],"spec":[{"active_deadline_seconds":0,"affinity":[],"automount_service_account_token":true,"container":[{"args":null,"command":null,"env":[],"env_from":[],"image":"nginx:latest","image_pull_policy":"Always","lifecycle":[],"liveness_probe":[],"name":"nginx","port":[{"container_port":80,"host_ip":"","host_port":0,"name":"","protocol":"TCP"}],"readiness_probe":[],"resources":[{"limits":{},"requests":{}}],"security_context":[],"startup_probe":[],"stdin":false,"stdin_once":false,"termination_message_path":"/dev/termination-log","termination_message_policy":"File","tty":false,"volume_device":[],"volume_mount":[{"mount_path":"/etc/nginx/nginx.conf","mount_propagation":"None","name":"nginx-config","read_only":false,"sub_path":"nginx.conf","sub_path_expr":""}],"working_dir":""}],"dns_config":[],"dns_policy":"ClusterFirst","enable_service_links":true,"host_aliases":[],"host_ipc":false,"host_network":false,"host_pid":false,"hostname":"","image_pull_secrets":[],"init_container":[],"node_name":"","node_selector":null,"os":[],"priority_class_name":"","readiness_gate":[],"restart_policy":"Always","runtime_class_name":"","scheduler_name":"default-scheduler","security_context":[],"service_account_name":"","share_process_namespace":false,"subdomain":"","termination_grace_period_seconds":30,"toleration":[],"topology_spread_constraint":[],"volume":[{"aws_elastic_block_store":[],"azure_disk":[],"azure_file":[],"ceph_fs":[],"cinder":[],"config_map":[{"default_mode":"0644","items":[],"name":"nginx-config","optional":false}],"csi":[],"downward_api":[],"empty_dir":[],"ephemeral":[],"fc":[],"flex_volume":[],"flocker":[],"gce_persistent_disk":[],"git_repo":[],"glusterfs":[],"host_path":[],"iscsi":[],"local":[],"name":"nginx-config","nfs":[],"persistent_volume_claim":[],"photon_persistent_disk":[],"projected":[],"quobyte":[],"rbd":[],"secret":[],"vsphere_volume":[]}]}]}]}],"timeouts":null,"wait_for_rollout":true},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9"}]},{"mode":"managed","type":"kubernetes_ingress_v1","name":"frontend","provider":"provider[\"registry.opentofu.org/hashicorp/kubernetes\"]","instances":[{"schema_version":0,"attributes":{"id":"default/frontend","metadata":[{"annotations":{"cert-manager.io/cluster-issuer":"letsencrypt-prod"},"generate_name":"","generation":1,"labels":null,"name":"frontend","namespace":"default","resource_version":"33569","uid":"c7589946-ff90-4103-ba49-641285fb7b6a"}],"spec":[{"default_backend":[],"ingress_class_name":"traefik","rule":[{"host":"135.125.246.84.xip.opensteak.fr","http":[{"path":[{"backend":[{"resource":[],"service":[{"name":"nginx-frontend","port":[{"name":"","number":80}]}]}],"path":"/","path_type":"ImplementationSpecific"}]}]}],"tls":[{"hosts":["135.125.246.84.xip.opensteak.fr"],"secret_name":"frontend-tls"}]}],"status":[{"load_balancer":[{"ingress":[{"hostname":"","ip":"135.125.246.84"}]}]}],"timeouts":null,"wait_for_load_balancer":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDB9fQ=="}]},{"mode":"managed","type":"kubernetes_service","name":"demo-flask","provider":"provider[\"registry.opentofu.org/hashicorp/kubernetes\"]","instances":[{"schema_version":1,"attributes":{"id":"default/demo-flask","metadata":[{"annotations":null,"generate_name":"","generation":0,"labels":null,"name":"demo-flask","namespace":"default","resource_version":"33571","uid":"bc4ac362-e123-4cc4-95dd-2c358fe6e4fb"}],"spec":[{"allocate_load_balancer_node_ports":true,"cluster_ip":"10.43.57.158","cluster_ips":["10.43.57.158"],"external_ips":null,"external_name":"","external_traffic_policy":"","health_check_node_port":0,"internal_traffic_policy":"Cluster","ip_families":["IPv4"],"ip_family_policy":"SingleStack","load_balancer_class":"","load_balancer_ip":"","load_balancer_source_ranges":null,"port":[{"app_protocol":"","name":"","node_port":0,"port":8080,"protocol":"TCP","target_port":"8080"}],"publish_not_ready_addresses":false,"selector":{"app":"demo-flask"},"session_affinity":"None","session_affinity_config":[],"type":"ClusterIP"}],"status":[{"load_balancer":[{"ingress":[]}]}],"timeouts":null,"wait_for_load_balancer":true},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="}]},{"mode":"managed","type":"kubernetes_service","name":"nginx-frontend","provider":"provider[\"registry.opentofu.org/hashicorp/kubernetes\"]","instances":[{"schema_version":1,"attributes":{"id":"default/nginx-frontend","metadata":[{"annotations":null,"generate_name":"","generation":0,"labels":null,"name":"nginx-frontend","namespace":"default","resource_version":"33582","uid":"e7dea7d0-f7b6-4193-a028-ca67ce2c33bd"}],"spec":[{"allocate_load_balancer_node_ports":true,"cluster_ip":"10.43.190.205","cluster_ips":["10.43.190.205"],"external_ips":null,"external_name":"","external_traffic_policy":"Cluster","health_check_node_port":0,"internal_traffic_policy":"Cluster","ip_families":["IPv4"],"ip_family_policy":"SingleStack","load_balancer_class":"","load_balancer_ip":"","load_balancer_source_ranges":null,"port":[{"app_protocol":"","name":"","node_port":32511,"port":80,"protocol":"TCP","target_port":"80"}],"publish_not_ready_addresses":false,"selector":{"app":"nginx-frontend"},"session_affinity":"None","session_affinity_config":[],"type":"LoadBalancer"}],"status":[{"load_balancer":[{"ingress":[]}]}],"timeouts":null,"wait_for_load_balancer":false},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="}]}],"check_results":null}
